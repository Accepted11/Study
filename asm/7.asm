CODES SEGMENT
    ASSUME CS:CODES
START:
	MOV DX,0646H   ;8254控制口地址
	MOV AL,00010110B ;送控制字
	OUT DX,AL
	MOV DX,0640H     ;8254通道0地址
	MOV AL,4		;送计数初值
	OUT DX,AL
	MOV DX,0606H	;8255控制口地址
	MOV AL,10010000B ;控制字
	OUT DX,AL
B1:
	MOV DX,0600H	;A口地址
	IN AL,DX		;输入
	CMP AL,0
	JNE L1
	MOV DX,0602H	;B口地址
	MOV AL,10101010B ;输出状态
	OUT DX,AL		;输出
	JMP L2			;延时
L1:
	MOV DX,0602H	;B口地址
	MOV AL,01010101B;另一种输出状态
	OUT DX,AL		;输出
L2:
	CALL DELAY

DELAY:
	MOV DX,0
	NE1:INC DX
		CMP DX,0FFFFH
		JNE NE1
	RET
CODES ENDS
    END START
