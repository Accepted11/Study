

[toc]

### 双纵坐标图

```matlab
x=0:0.01:20;
y1=200*exp(-0.05*x).*sin(x);
y2=0.8*exp(-0.5*x).*sin(10*x);
plotyy(x,y1,x,y2);
```

$$
绘制椭圆曲线x^2+\frac{y^2}{4}=1
$$

```matlab
ezplot('x^2+y^2/4-1')
ezplot('x^2+y^2/4=1')

syms t;
x=cos(t);
y=2*sin(t);
ezplot(x,y)
```

### 平面图

```matlab
x=0:pi/10:2*pi;
y1=sin(x);
y2=sin(x-0.25);
y3=sin(x-0.5);
plot(x,y1,'g',x,y2,'b--o',x,y3,'c*');
legend('sin(x)','sin(x-0.25)','sin(x-0.5)')
xlabel('x');
ylabel('y');
```

```matlab
x=0:pi/10:2*pi;
y1=sin(x);
y2=sin(x-0.25);
y3=sin(x-0.5);
plot(x,y1,'g',x,y2,'b--o',x,y3,'c*');
subplot(3,1,1);
plot(x,y1,'g');
title('sin(x)');
xlabel('x');
ylabel('y');
subplot(3,1,2);
plot(x,y2,'b--o');
title('sin(x-0.25)');
xlabel('x');
ylabel('y');
subplot(3,1,3);
plot(x,y2,'c*');
title('sin(x-0.5)');
xlabel('x');
ylabel('y');
```

### 极坐标

```matlab
绘制枫图案
t=-pi/2:0.05:1.5*pi;
f=100./(100+(t-pi/2).^8)*2-sin(7*t)-cos(30*t)/2;
polar(t,f,'r')
```



### 三维曲线图

```matlab
t=0:0.05:20*pi;
x=sin(t);
y=cos(t);
z=t.*sin(t).*cos(t);
plot3(x,y,z);
xlabel('x');
ylabel('y');
zlabel('z');
grid on
```

### 三维网格图

```matlab
x=-3:0.05:3;
y=-5:0.05:5;
[X,Y]=meshgrid(x,y);
Z=(sin(X.*Y)+eps)./(X.*Y+eps);
mesh(X,Y,Z)
```
### 三维曲面图

```matlab
x=-3:0.05:3;
y=-5:0.05:5;
[X,Y]=meshgrid(x,y);
Z=(sin(X.*Y)+eps)./(X.*Y+eps);
surf(X,Y,Z)
```

### 四维图形

$$
可视化函数v=xe^{-(x^2+y^2+z^2)}其中-2<=x<=2,-2<=y<=2,-2<=z<=2
$$

```matlab
[x,y,z]=meshgrid(-2:0.2:2,-2:0.25:2,-2:0.16:2);
v=x.*exp(-x.^2-y.^2-z.^2);
xslice=[-1.2:0.8:2];
yslice=2;
zslice=[-2:0];
slice(x,y,z,v,xslice,yslice,zslice)
colormap hsv
```

### 三维散点

```matlab
z=linspace(0,4*pi,250);
x=2*cos(z)+rand(1,250);
y=2*sin(z)+rand(1,250);
scatter3(x,y,z,'filled');
view(-30,10)%设置视点
```

### 函数的导数

$$
求函数y=log(x+\sqrt{1+x^2})的一阶和二阶导数
$$

```matlab
syms x;
y=log(x+sqrt(1+x^2));
dydx=diff(y,x);
dydx=simplify(dydx)
dydx2=diff(y,x,2);
dydx2=simplify(dydx2)
```

### 隐函数求导

$$
设e^{y}+xy-e=0求\frac{dy}{dx}\\
公式\frac{dy}{dx}=-\frac{f_{x}}{f_{y}}
$$

```matlab
syms x y;
f=exp(y)+x*y-exp(1);
dfdx=diff(f,x);
dfdy=diff(f,y);
dydx=-dfdx/dfdy
```

### 参数方程求导

$$
设参数方程\left\{\begin{matrix}
 x=x(t)& \\
 y=y(t)& 
\end{matrix}\right.
确定的函数y=f(x),则\frac{dy}{dx}=\frac{y'(t)}{x'(t)}
$$

$$
设\left\{\begin{matrix}
 x=a(t-sin(t))& \\
 y=a(1-cos(t))& 
\end{matrix}\right.
求\frac{dy}{dx}
$$

```matlab
syms a t;
dxdt=diff(a*(t-sin(t)));
dydt=diff(a*(1-cos(t)));
dydx=dydt/dxdt
```

### 积分

$$
1）\int \frac{1}{1+\sqrt{1-x^2}}dx\\
2)\int_{0}^{1}\frac{1}{1+\sqrt{1-x^2}}dx\\
3)\int_{0}^{\infty}\frac{sinx}{x}dx
$$

```matlab
syms x;
I=int(1/(1+sqrt(1-x^2)));
pretty(I)
int(1/(1+sqrt(1-x^2)),0,1)
int(sin(x)/x,0,inf)
```

### 平面图形的面积

$$
A=\int_{a}^{b}|y_2(x)-y_1(x)|dx
$$

$$
求由y=e^x,y=e^{-x},x=1所围成图形的面积
$$

```matlab
x=-1:0.1:2;
y1=exp(-x);
y2=exp(x);
plot(x,y1,x,y2);
hold on
plot([1 1],[-1 7]);
x=0:0.1:1;
y1=exp(-x);
y2=exp(x);
fill([x fliplr(x)],[y1 fliplr(y2)],'b')
```

```matlab
syms x;
y1=exp(-x);
y2=exp(x);
a=0;
b=1;
area=int(abs(y1-y2),a,b)
```

### 旋转体体积

$$
V=\int_{a}^{b}\pi[f(x)]^2dx
$$


$$
求椭圆y=\frac{b}{a}\sqrt{a^2-x^2}绕x轴旋转而成的 椭球体积
$$

```matlab
a=1;
b=2;
x=-a:0.1:a;
f=b/a*sqrt(a^2-x.^2);
[X,Y,Z]=cylinder(f);
Z=Z*a*2-a;
surf(X,Y,Z)
```

```matlab
syms x a b;
f=b/a*sqrt(a^2-x^2);
y=int(pi*f^2,-a,a)
```

### 已知截面面积的立体体积

$$
V=\int_{a}^{b}A(x)dx
$$

$$
求已知截面面积A(x)=3*x^4+6*x-5,x\in [0,5]的立体体积
$$

```matlab
syms x;
A=3*x^4+6*x-5;
int(A,0,5)
```

### 平面曲线的弧长

$$
S=\int_{a}^{b}\sqrt{1+y'^2}dx\\
S=\int_{\alpha}^{\beta}\sqrt{\varphi'^2(t)+\psi'^2(t)}dt\\
S=\int_{\alpha}^{\beta}\sqrt{r^2(\theta)+r'^2{\theta}}d\theta \\
\left\{\begin{matrix}
x=a(t-sint)\\ 
y=a(1-cost)
\end{matrix}\right.
(0<=t<=2\pi)的长度
$$

```matlab
a=1;
syms t;
x=a*(t-sin(t));
y=a*(1-cos(t));
ezplot(x,y,[0,2*pi]);
grid on;
```

```matlab
syms t a;
x=a*(t-sin(t));
y=a*(1-cos(t));
int(sqrt(diff(x)^2+diff(y)^2),0,2*pi)
```



### 单调区间

$$
求函数y=x^3-2*x+1的 单调区间
$$

```matlab
syms x;
y=x^3-2*x+1;
dydx=diff(y);
x=-4:0.1:4;
y=eval(y);
dydx=eval(dydx);
plot(x,y,x,dydx);
xlabel('x');
ylabel('y,dy.dx');
legend('y(x)','dy/dx');
grid on
```

```matlab
syms x;
y=x^3-2*x+1;
dydx=diff(y);
zeroPoint=solve(dydx,x);
subs(dydx,x,-1)
subs(dydx,x,0)
subs(dydx,x,1)
%1 -2 1
```

$$
在\left (-\infty,-\frac{\sqrt{6}}{3} \right ) \quad\left (\frac{\sqrt{6}}{3}，+\infty \right )单调递增\\
在\left (-\frac{\sqrt{6}}{3},\frac{\sqrt{6}}{3}\right )单调递减
$$



### 凹凸区间

$$
求函数y=\frac{1}{1+2x^2}的凹凸区间和拐点
$$
```matlab
syms x;
y=1/(1+2*x^2);
dydx2=diff(y,2);
x=[-3:0.1:3];
y=eval(y);
dydx2=eval(dydx2);
plot(x,y,x,dydx2,'--');
xlabel('x');
ylabel('y, dy/dx2');
legend('函数','二阶导数');
axis([-3,3,-5,2]);
grid on
```

```matlab
syms x;
y=1/(1+2*x^2);
dydx2=diff(y,2);
zeroPoint=solve(dydx2,x);
zeroPoint=simplify(zeroPoint)
subs(y,x,double(zeroPoint))
```

$$
在\left (-\infty,\frac{1}{\sqrt{6}} \right ) \quad\left (\frac{1}{\sqrt{6}}，+\infty \right )二阶导数大于零,下凸\\
在\left (-\frac{1}{\sqrt{6}},\frac{1}{\sqrt{6}} \right )二阶导数小于零,上凸\\
两个拐点分别是\left (-\frac{1}{\sqrt{6}},\frac{3}{4} \right )和
\left (\frac{1}{\sqrt{6}},\frac{3}{4} \right )
$$

### 极值

$$
求函数y=\frac{x}{1+x^2}的极值
$$

```matlab
syms x;
y=x/(1+x^2);
ezplot(y,[-10,10]);
```

##### 利用极值判定定理

```matlab
syms x;
y=x/(1+x^2);
zeroPoint=solve(diff(y),x);
%-1 1
%驻点为x=1或x=-1
subs(diff(y,2),x,double(zeroPoint));
% -1/2 1/2
%二阶导
%x=-1 二阶导为1/2 极小值
%x=1 二阶导为-1/2 极大值
subs(y,x,double(zeroPoint))
%-1/2 1/2
%极小值为-1/2 极大值1/2
```

##### 利用优化函数

```matlab
f=@(x) x/(1+x^2);
[xmin,ymin]=fminbnd(f,-2,0);%在(-2,0)求极小值
ff=@(x) -x/(1+x^2);
xmax=fminbnd(ff,0,2);%求极大值转化为求极小值
ymax=f(xmax);
```

### 拉格朗日中值定理

$$
对函数f(x)=ln(1+x)在[0,4]上观察拉格朗日中值定理的几何意义
$$

```matlab
syms x;
f=log(1+x);
figure;
ezplot(f,[0,4]);
hold on;
ab=[0,4];
fab=subs(f,ab);
kab=(fab(2)-fab(1))/(ab(2)-ab(1));
plot(ab,fab);
hold off
```

```matlab
syms x;
f=log(1+x);
hold on;
ab=[0,4];
fab=subs(f,ab);
kab=(fab(2)-fab(1))/(ab(2)-ab(1));
xi=eval(solve(diff(f)-kab))
```

```matlab
figure;
ezplot(f,[0,4]);
hold on;
plot(ab,fab);
y=subs(f,x,xi)+kab*(x-xi);
ezplot(y,[0,4]);
axis([0,4,-0.5,2]);
hold off;
```

### 偏导数及高阶导数

$$
设z=e^{2x}(x+y^{2}+2y)求\frac{\partial z}{\partial x}, \frac{\partial z}{\partial y},\frac{\partial ^2 z}{\partial x^2},\frac{\partial ^2 z}{\partial y^2},\frac{\partial ^2 z}{\partial x\partial y}
$$

```matlab
syms x y;
z=exp(2*x)*(x+y^2+2*y);
dzdx=diff(z,x)
dzdy=diff(z,y)
dzdx2=diff(z,x,2)
dxdy2=diff(z,y,2)
dzdxdy=diff(diff(z,x),y)
```

### 多元函数全微分

$$
已知z=(x^2+y^2)sin(xy)，求dz
$$

```matlab
syms x y
z=(x^2+y^2)*sin(x*y);
dz=diff(z,x)*'dx'+diff(z,y)*'dy'
```

$$
已知z=3x^2y^3+ln(xy)求当x=2,y=3,\Delta x=0.02,\Delta y=0.01时,求dz
$$

```matlab
syms x y;
z=3*x^2*y^3+log(x*y);
dzdx=diff(z,x);
dzdy=diff(z,y);
x=2;y=3;
dzdx=eval(dzdx);
dzdy=eval(dzdy);
dx=0.02;dy=0.01;
dz=dzdx*dx+dzdy*dy
```

### 二重积分

$$
\iint_{D} xy^2dxdy 其中D为由x+y=2，x=\sqrt{y},y=2所围成有界区域 
$$

```matlab
syms x y;
[x y]=solve(y==2-x,y==x^2,x>=0,x,y);
xpoints=[vpa(x) 0 sqrt(2)];
a=min(xpoints);
b=max(xpoints);
x=a-1:0.1:b+1;
y1=2-x;
y2=x.^2;
y3=0*x+2;
plot(x,y1,x,y2,x,y3);
hold on
x=a:0.1:1;
y1=2-x;
y3=0*x+2;
fill([x fliplr(x)],[y1 fliplr(y3)],'b');
x=1:0.1:b;
y2=x.^2;
y3=x*0+2;
fill([x fliplr(x)],[y2 fliplr(y3)],'b');
syms x y
int(int(x*y^2,x,2-y,sqrt(y)),y,1,2)
```

$$
计算\iint_{D}e^{-(x^2+y^2)}dxdy\quad D为x^2+y^2\leqslant 1
$$

```matlab
syms x y r theta;
x=r*cos(theta);
y=r*sin(theta);
xy2r=simplify(x^2+y^2);
f=exp(-xy2r);
int(int(f*r,r,0,1),theta,0,2*pi)
```

### 三重积分

$$
\iiint (x^2+y^2+z)dxdydz 是由曲面z=\sqrt{2-x^2-y^2}与z=\sqrt{x^2+y^2}围成
$$

$$
曲面z=\sqrt{2-x^2-y^2}与z=\sqrt{x^2+y^2}交线在xoy平面上的投影为
\left\{\begin{matrix}
 \sqrt{2-x^2-y^2}=\sqrt{x^2+y^2}   \\ 
 z=0
\end{matrix}\right.\\
得
\left\{\begin{matrix}
 x^2+y^2=1   \\ 
 z=0
\end{matrix}\right.
$$

##### 柱面坐标

$$
\left\{\begin{matrix}
x=rsin\theta\\
y=rcos\theta\\
z=z
\end{matrix}\right.
$$

$$
\iiint f(x,y,z)dxdydz=f(rsin\theta,rcos\theta,z)rdrd\theta dz
$$



```matlab
syms x y z;
z1=sqrt(2-x^2-y^2);
z2=x^2+y^2;
[X Y]=meshgrid(-1:0.1:1);
Z1=eval(subs(z1,{x,y},{X,Y}));
Z2=eval(subs(z2,{x,y},{X,Y}));
surf(X,Y,Z1);
hold on
surf(X,Y,Z2)
xlabel('x轴');
ylabel('y轴');
syms t theta;
x=r*cos(theta);
y=r*sin(theta);
f=x^2+y^2+z;
z1=sqrt(2-x^2-y^2);
z2=sqrt(x^2+y^2);
int(int(int(f*r,z,z2,z1),r,0,1),theta,0,2*pi)
```

##### 球坐标

$$
\left\{\begin{matrix}
x=rsin \varphi cos\theta\\ 
x=rsin \varphi sin\theta \\
z=rcos\varphi
\end{matrix}\right.
$$

$$
\iiint f(x,y,z)dxdydz=f(rsin \varphi cos\theta,rsin \varphi sin\theta,rcos\varphi)r^2sin\varphi drd\theta d\varphi
$$

```matlab
syms r phi theta;
x=r*sin(phi)*cos(theta);
y=r*sin(phi)*sin(theta);
z=r*cos(phi);
f=x^2+y^2+z;
int(int(int(f*r^2*sin(phi),r,0,sqrt(2)),phi,0,pi/4),theta,0,2*pi)
```

### 求弧长

$$
\int_L f(x,y)ds=\int_{a}^{b} f(x(t),y(t))\sqrt{x'^2(t)+y'^2(t))}dt\\
\int_L f(x,y,z)ds=\int_{a}^{b} f(x(t),y(t),z(t))\sqrt{x'^2(t)+y'^2(t)+z'^2(t))}dt
$$

$$
计算\int_L\sqrt{y}ds L为y=x^2上O(0,0)到B(1,1)一段弧
$$

```matlab
syms t;
x=t;
y=t^2;
z=0;
f=sqrt(y);
s=int(f*sqrt(diff(x,t)^2+diff(y,t)^2+diff(z,t)^2),t,0,1)
```

$$
求锥面x^2+y^2=z^2,z>=0与柱面x^2+y^2=x交线的长度
$$

$$
\left\{\begin{matrix}
x=cos^2(t)\\
y=sin(t)\cos(t);\\
z=cos(t);
\end{matrix}\right.
t\in[-pi/2,pi/2]
$$

```matlab
u=linspace(0,pi,50);
figure;
v=linspace(0,pi*2,50);
[u,v]=meshgrid(u,v);
x=sin(u).*cos(v);
y=sin(u).*sin(v);
z=sin(u);
surf(x,y,z)
hold on
t=linspace(0,pi*2,50);
z1=linspace(0,1.2,50);
[t,z1]=meshgrid(t,z1);
surf(cos(t).^2,cos(t).*sin(t),z1);
t=linspace(-pi/2,pi/2,50);
figure
plot3(cos(t).^2,cos(t).*sin(t),cos(t));
syms t;
x=cos(t)^2;
y=cos(t)*sin(t);
z=cos(t);
f=1;
s=int(f*sqrt(simplify(diff(x,t)^2+diff(y,t)^2)+diff(z,t)^2),t,-pi/2,pi/2)
```

### 多元函数极值

$$
求f(x,y)=x^3-y^3+3x^2+3y^2-9x的极值
$$

##### 高等数学法

```matlab
syms x y;
f=x^3-y^3+3*x^2+3*y^2-9*x;
dfdx=diff(f,x);
dfdy=diff(f,y);
[x0,y0]=solve(dfdx,dfdy,x,y);
xmax=[];
xmin=[];
for k=1:length(x0)
    A=subs(diff(dfdx,x),[x,y],[x0(k),y0(k)]);
    B=subs(diff(dfdx,y),[x,y],[x0(k),y0(k)]);
    C=subs(diff(dfdy,y),[x,y],[x0(k),y0(k)]);
    if double(A*C-B^2)>0
        if double(A)<0
            xmax=[xmax;[x0(k),y0(k)]];
        else
            xmin=[xmin;[x0(k),y0(k)]];
        end
    end
end
if ~isempty(xmax)
    fmax=subs(f,[x,y],[xmax(:,1),xmax(:,2)]);
else
    fmax=[];
end
if ~isempty(xmin)
    fmin=subs(f,[x,y],[xmin(:,1),xmin(:,2)]);
else
    fmin=[];
end
[xmax fmax]
[xmin fmin]
```

##### 等高线法

```matlab
x=-4:0.2:3;
y=-1:0.2:3;
[x,y]=meshgrid(x,y);
f=x.^3-y.^3+3*x.^2+3*y.^2-9*x;
figure
surf(x,y,f);
figure
contour(x,y,f,50);
hold on
grid on
[px,py]=gradient(f,0.2,0.2);
quiver(x,y,px,py)
```

##### 利用优化函数

```matlab
%rand(2,4)，则会得到一个2行4列的在1以内的随机矩阵
fun=@(x) x(1)^3-x(2)^3+3*x(1)^2+3*x(2)^2-9*x(1);
[xmin,fmin]=fminsearch(fun,rand(1,2))
fun1=@(x) -(x(1)^3-x(2)^3+3*x(1)^2+3*x(2)^2-9*x(1));
[xmax,fmax]=fminsearch(fun1,rand(1,2))
```

### 数值积分计算问题

$$
计算\int_{0}^{1}e^{-x^2}dx
$$

##### 矩形法

```matlab
n=1000;
a=0;
b=1;
h=(b-a)/n;
x=a:h:b;
y=exp(-x.^2);
L=sum(y(1:end-1))*h
R=sum(y(2:end))*h
```

##### 梯形公式

```matlab
n=1000;
a=0;
b=1;
h=(b-a)/n;
x=a:h:b;
y=exp(-x.^2);
Q=trapz(x,y)
```

##### 辛普森方法

```matlab
a=0;
b=1;
y=@(x) exp(-x.^2);
Q=quad(y,a,b)
```

### 数据拟合

```matlab
x=0:0.1:1;
y=[-0.447,1.978,3.28,6.16,7.08,7.34,7.66,9.56,9.48,9.3,11.2] ;
plot(x,y,'k.','markersize',25) 
p3=polyfit(x,y,3);
p6=polyfit(x,y,6);
t=0:0.05:1.2;
s=polyval(p3,t);
s1=polyval(p6,t);
hold on 
plot(t,s,'r-','linewidth',2);
plot(t,s1,'b--','linewidth',2);
axis([0 1.3 -2 16]) 
grid on 
%多项式曲线拟合:  polyfit. 
%y0=polyval(p,x0) 
%p=polyfit(x,y,m) 
%其中, x, y为已知数据点向量, 分别表示横,纵坐 标, m为拟合多项式的次数, 结果返回m次拟合 多项式系数, 从高次到低次存放在向量p中. 
%可求得多项式在x0处的值y0
```

```matlab
t=[0:1:16];
y=[30.0 29.1 28.4 28.1 28.0 27.7 27.5 27.2 27.0 26.8 26.5 26.3 26.1 25.7 25.3 24.8 24.0];
plot(t,y,'*');
a=polyfit(t,y,1) 
y1=-0.3012*t+29.3804 
hold on 
plot(t, y1)
```

$$
输入信号u(t)=e^{-5t}cos(2t+1)+5求下面微分方程的通解\\
y^{(4)}+10y^{(3)}+35y^{(2)}+50y^{(1)}+24y(t)=5u^{(2)}+4u^{(1)}+2u(t)
$$

```matlab
syms y(t) u(t);
u=exp(-5*t)*cos(2*t+1)+5;
y=dsolve(diff(y,4)+10*diff(y,3)+35*diff(y,2)+50*diff(y,1)+24*y==5*diff(u,t,2)+4*diff(u,t)+2*u);
```

### 分段函数的写法

```matlab
f(x)=sinx(x>=0)，x^3(-2<x<0)，-8(x<=-2)
F=@(x)sin(x).*(x>=0)+(x.^3).*(x>-2&x<0)+(-8)*(x<=-2);
```

|                   dot(A,B)                    |                  计算数组a和b的叉积(向量积)                  |
| :-------------------------------------------: | :----------------------------------------------------------: |
|              cross(数组a，数组b)              |                  计算数组a和b的点积(数量积)                  |
|             A([i1，j1]，[i2，j2])             |      返回二位矩阵中第i1行的前j1个数以及第i2行的前j2个数      |
|                    inv(A)                     |                        返回A的逆矩阵                         |
|                    det(A)                     |                          返回行列式                          |
|            int(待求表达式，自变量)            |               求不定积分(只有一个自变量可省略)               |
|    int(待求表达式，自变量，积分上限，下限)    |          求定积分(省略任意常数C，∞为inf，-∞为-inf)           |
|                    rank(A)                    |                          返回A的秩                           |
|                  solve(方程)                  |                解方程(如果多解按照列向量输出)                |
|                solve(方程，x)                 |                    解方程，关于x的解析式                     |
|                   min(数组)                   |                   输出每一个列向量中最小数                   |
|                   max(数组)                   |                   输出每一个列向量中最大数                   |
|                vpa(数字，位数)                |             过程中每次运算都为有效数字的有效数字             |
|                    figure                     |               创建一个新窗口，其他参数采用默认               |
| feval(函数表达式，[需要求的点(之间逗号隔开)]) |                           计算函数                           |
|              dsolve(常微分方程)               |              解常微分方程，结果中的C为任意常数               |
|                  trapz(x，y)                  |          x是一个数组，y是关于x的函数，关于y对x积分           |
|                 quad(f，a，b)                 |              f是要积分的函数，A和B是积分上下限               |
|                int(f，v，a，b)                | 求解定积分和不定积分和广义积分，a，b是积分上下限，f是待求解的函数，v是积分变量 |
|                disp(‘字符串‘)                 |                          输出字符串                          |
|                  disp(数字)                   |                           输出数字                           |
|           disp([‘ 字符串‘，数字 ])            |                     同时输出字符串和数字                     |
|               ezplot(f，[a，b])               |                   绘制函数f在a<x<b上的图形                   |
|            plot3(x，y，z，’选项1’)            | 三维曲线图(linewidth为线的粗细，后面跟一个数字)；例子：plot3(x，y，z，'linewidth'，2) |
|                    grid on                    |                          绘制网格线                          |
|               title(‘图形名称’)               |                          加图形标题                          |
|        subplot(列数，行数，子窗口位置)        |                       切割窗口(横着数)                       |
|           [X，Y] = meshgrid (x，y)            |                X，Y是向量，将其转换成网格坐标                |
|                 mesh(X，Y，Z)                 |                       绘制三维网格曲面                       |
|                 surf(X，Y，Z)                 |                        绘制三维实曲面                        |
|                   ezplot(f)                   |           绘制函数f在区域为2*pi<x，y<2*pi上的图形            |

**iskeyword**：获得关键字的列表

|  变量  |                说明                |
| :----: | :--------------------------------: |
|  ans   |       预设的计算结果的变量名       |
|  eps   | 定义正的极小值=$$2.2204*10^{-16}$$ |
|   pi   |             $$\pi$$ 值             |
|  inf   |       $$\infty$$ 值，无限大        |
|  NaN   |     无法定义一个数目(零做分母)     |
| i 或 j |   虚数单位 i = j =$$\sqrt{-1}$$    |

**clear all**:如果变量用户不用clear清除它，或对它重新进行赋值，那么该变量一直保存在变量空间中，直到本次指令窗口关闭为止。

**clc**：清除所有指令

| 函数  |                        运算法则                         |                   实例                   |
| :---: | :-----------------------------------------------------: | :--------------------------------------: |
| floor |                        向下取整                         |       floor(3.5)=3;floor(-3.5)=-4        |
| ceil  |                        向上取整                         |        ceil(3.5)=4;ceil(-3.5)=-3         |
| round | 取最接近的整数，如果小数部分是0.5，向绝对值大的方向取整 | round(1.4)=1;round(3.5)=4;round(-3.5)=-4 |
|  fix  |                         向0取整                         |          fix(3.5)=3;fix(-3.5)=3          |

|      函数      |        说明         |
| :------------: | :-----------------: |
| x=complex(a,b) |  建立一个复数a+bi   |
|    real(x)     |   返回复数的实部a   |
|     abs(x)     |    返回复数的模     |
|    conj(x)     | 返回复数x的共轭复数 |
|    imag(x)     |   返回复数的虚部a   |
|    angle(x)    |    返回复数x辅角    |

```matlab
str='abs'
abs(str)
ans=
	97	98	99
```

|      函数      |               说明               |
| :------------: | :------------------------------: |
|      char      |          转换成字符类型          |
|    int2str     |        将整数转化成字符串        |
|    num2str     |        将数值转化成字符串        |
|    str2num     |        将字符串转化成数值        |
| **str2double** |       将字符串转化成浮点数       |
|    **eval**    | 将字符串转化成matlab可执行的语句 |

```matlab
num={'2.5e-1','-3.8','1.125'}
str2double(num)
ans=
	0.2500
   -3.8000
    1.1250
```

```matlab
eval('sin(1)')
ans=
	0.8415
```

| 名称  |      含义      |
| :---: | :------------: |
|  exp  | 以e为底的指数  |
|  log  |    自然对数    |
| sqrt  |     平方根     |
| log10 | 以10为底的对数 |
| log2  | 以2为底的对数  |
| pow2  |     2的幂      |

|   函数   |                             说明                             |
| :------: | :----------------------------------------------------------: |
| collect  | 将表达式按照其默认的符号变量的幂次由高到低，同一幂次的符号变量的系数被合并到一起 |
|  expand  |                         将表达式展开                         |
|  horner  |                    将表达式分解成嵌套形式                    |
|  factor  |                           因式分解                           |
| simplify |                          表达式化简                          |
|   subs   |           将符号表达式中的某些符号变量为指定新变量           |

```matlab
syms x y a b c s
f=x^3*y+x*(y^2+6)+x*y+8*x^2+y^2*x
collect(f)
ans=
	y*x^3+8*x^2+(2*y^2+y+6)*x
	
expand((x-1)*(x-2)*(x-3))
ans=
	x^3-6*x^2+11*x-6

horner(x^3-6*x^2+11*x-6)
ans=
	-6+(11+(-6+x)*x)*x

factor(x^3-6*x^2+11*x-6)
ans=
	(x-1)*(x-2)*(x-3)

subs(s+a+b+c,{a,b,c},{10,10,20})
ans=
	s+40
```

**%**：表示注释

```matlab
h=1+3+5 ...
+10
ans=
	19
```

MATLAB的每条命令后，若为**逗号**或**无标点**符号，则显示命令的结果；若命令后为**分号**禁止显示结果

```matlab
%行向量
x=[1 2 3 4 5]
%列向量
x=[1;2;3;4;5]
x=1:5 %默认步长为1
x=1:2:5
x=linspace(1,5,5)%把1~5分成5份
x=logspace(a,b,n)%在 10 的幂 10^a 和 10^b（10 的 N 次幂）之间生成 n 个点
				 %生成从10的a次方到10的b次方之间按对数等分的n个元素的行向量
```

（1）**访问一个元素**： x(i)表示访问数组x的第i个元素. 

（2）**访问一块元素**： x(a ：b ：c)表示访问数组x的从第a个元素开始，以步长为b到第c个元素（但不超过c），b可以为负数，b缺损时为1. 

```matlab
x=1:5
x(3)
ans=
	3
x(1:2:5)
ans=
	1 3 5
x(1:5)
ans=
	1 2	3 4	5
```

```
A=[1 2 3 4]
A'
ans=
	1
	2
	3
	4
```

$$
a=[a_1,a_2,…,a_n], c=标量\\
a+c=[a_1+c,a_2+c,...,a_n+c]\\
a.*c=[a_1*c,a_2*c,...,a_n*c]\\
a./c=[a_1/c,a_2/c,...,a_n/c]\\
a.\verb|\|c=[c/a_1,c/a_2,...,c/a_n]\\
a.\verb|^|c=[a_1^c,a_2^c,...,a_n^c]\\
c.*a=[c^a_1,c^a_2,...,c^a_n]\\
$$

```
A=[1 2 3;4 5 6;7 8 9]
ans=
	1 2 3
	4 5 6
	7 8 9
```

**a=[ ]**     产生一个空矩阵，当对一项操作无结果时，返回空矩阵，空矩阵的大小为零

**b=zeros(m,n)**产生一个m行、n列的零矩阵

**c=ones(m，n) **产生一个m行、n列的元素全为1的矩阵

**d=eye(m,n) **产生一个m行、n列的元素单位阵

（1）矩阵A的第r行：A（r，：）

（2）矩阵A的第r列：A（：，r）

（3）依次提取矩阵A的每一列，将A拉伸为一个列向量：A（：）

（4）取矩阵A的第$i1\verb|~|i2$行、第j1~j2列构成新矩阵:A(i1:i2, j1:j2)

（5）以逆序提取矩阵A的第i1~i2行，构成新矩阵:A(i2:-1：i1，：）

（6）以逆序提取矩阵A的第j1~j2列，构成新矩阵:A(:,   j2:-1：j1 ）

（7）删除A的第i1~i2行，构成新矩阵:A(i1:i2，：)=[ ]

（8）删除A的第j1~j2列，构成新矩阵:A(：， j1:j2)=[ ]

（9）将矩阵A和B拼接成新矩阵：[A  B]或[A；B]

```matlab
A=[1 2 3]
B=[2 3 4]
A.*B=[2 6 12] %对应分量相乘
A*B'=[20]  %线性代数中普通的乘
```

![1](D:\文件\数学实验\1.png)

```matlab
A=[9 4 2;
   4 7 1;
   1 5 8];
b=[-2;3;-4];
sol1=A\b
syms x y z;
[x y z]=solve(9*x+4*y+2*z==-2, ...
    4*x+7*y+z==3,...
    x+5*y+8*z==-4);
sol2=vpa([x y z],4)
```

$$
(2sin\frac{\pi}{5}+3)^{2}+\frac{4}{7}
$$

```matlab
f=(2*sin(pi/5)+3)^2+4/7
```

$$
e^{2x}+sinx+3
$$

```matlab
f=exp(2*x)+sin(x)+3
```

$$
ln(x+1)-cosx
$$

```matlab
f=log(x+1)-cos(x)
```

$$
log_2(x^2+1)-\sqrt{x}
$$

```matlab
f=log2(x^2+1)-sqrt(x)
```

$$
log_{10}({x^{\frac{1}{3}}}+2)+arcsin(x)
$$

```matlab
f=log10(x^(1/3)+2)+asin(x);
```

写出生成分量0,0.2,0.4,0.6 ...0.2k ...,2的一个列向量和行向量的命令

```matlab
x=0:0.2:2
y=x'
```

用函数文件和函数文件写出一个求和数列1，2，3，4，k，k+1...前十项和

```matlab
x=1:10;
seriessum(x)

function S=seriessum(x)
    S=sum(x);
end

disp(['The number of series x is: s=',num2str(S)])
```

$$
将多项式x^3-6*x^2+11x-6因式分解的命令是什么
$$

```matlab
syms x;
factor(x^3-6*x^2+11*x-6)
```

写出向量a=(1,2,1),b=(2,0,1)叉积，点积和分量乘的命令

```matlab
a=[1 2 1];
b=[2 0 1];
dotab=dot(a,b)
crossab=cross(a,b)
ab=a.*b
```

$$
设A=\begin{pmatrix}
1&-2&4\\ 
2&0&5\\
6&2&3 
\end{pmatrix}写出命令的运行结果\\
A(4) \quad -2\\
A(2,:)\quad 2\quad0\quad5\\
A(;,3)\quad
\begin{pmatrix}
4\\ 
5\\
3 
\end{pmatrix}\\
A([1,2],[1,2])\quad
\begin{pmatrix}
1&-2\\ 
2&0\\
\end{pmatrix}\\
给出求A的秩,逆矩阵和行列式的命令\\
rank(A)\quad inv(A)\quad det(A)
$$

写出程序，将下列 三条曲线画在同一个图形窗口中，并给出适当的线型、标识符、颜色、标题和图形说明
$$
u(x)=\frac{x(x+1)}{2}\quad v(x)=-(x+1)(x-1)\quad w(x)=0.5x(x+1)
$$

```matlab
x=linspace(-1,1,80);
u=x.*(x-1)/2;
v=-(x+1).*(x-1);
w=0.5*x.*(x+1);
plot(x,u,'r',x,v,'gp',x,w,'b--');
legend('u','v','w')
title('Three Lines')
```

写出计算下列函数的不定积分和定积分的程序

<img src="D:\文件\数学实验\2.png" alt="2" style="zoom:150%;" />

```matlab
syms x z;
f1=-2*x/(1+x^2);
I1=int(f1)
f2=x/((1+z^2)^2);
I2=int(f2,z)
f3=x/(1+x^2);
I3=int(f3)
f4=x*log(x+1);
I4=int(f4,0,1)
f5=2*sin(x)/x;
I5=int(f5,x,0,inf)
f6=cos(x)+x^2+3
I6=int(f6);
f7=(x^2+2*sin(x));
I7=int(f7,0,1)
```

![3](D:\文件\数学实验\3.png)

```matlab
t=0:pi/20:2*pi;
x=3*cos(t);
y1=2*sin(t);
y2=0*t+1;
plot(x,y1,x,y2)
syms x;
y1=2*sqrt(1-x^2/9);
y2=1;
x0=solve(y1==y2);
xmin=min(x0);
xmax=max(x0);
A1=vpa(int(y1-y2,x,xmin,xmax),4)
A2=vpa(pi*3*2-A1,4)
```

![4](D:\文件\数学实验\4.png)

```matlab
syms t;
x=2*cos(4*t);
y=2*sin(4*t);
z=t;
L=int(sqrt(diff(x,t)^2+diff(y,t)^2+diff(z,t)^2),t,0,pi/2)
```

<img src="D:\文件\数学实验\5.png" alt="5" style="zoom:150%;" />

```matlab
f=@(x) sin(x).*(x>=0)+(x.^3).*(x>-2&x<0)+(-8).*(x<=-2);
ezplot(f,[-6,6])
grid on
```

$$
写一个程序，画出函数y=1+sin(x)图像
$$

```matlab
syms x;
y=1+sin(x);
ezplot(y);
grid on;
title('1+sin(x)')
```

$$
写程序，画出三维曲线
\left\{\begin{matrix}
x=cos(t)\\ 
y=sin(t)\\
z=2t
\end{matrix}\right.其中0\leqslant t \leqslant 2*pi
$$

```matlab
t=linspace(0,2*pi,100);
x=cos(t);
y=sin(t);
z=2*t;
plot3(x,y,z,'g','linewidth',2);
grid on
```

$$
给出程序,画出平面直线l_1:y=2x+1和空间直线l_2:\frac{x-1}{2}=\frac{y}{-1}=\frac{z+3}{3}
$$

```matlab
x=-6:0.5:6;
y=x*2+1;
plot(x,y);
grid on;
title('Plane Line');
figure 
t=-1:0.01:1;
x=1+t*2;
y=-t;
z=-3+3*t;
plot3(x,y,z);
grid on
title('Space Line')
```

$$
利用feval,求g(x)=x^3+2*x+sin(x)在x=0,1处的值
$$

```matlab
g=@(x) (x.^3+2*x+sin(x));
feval(g,[0,1])
```

![6](D:\文件\数学实验\6.png)

```matlab
t=0:0.001*pi:pi*2;
r1=sin(3*t);
r2=cos(3*t);
subplot(1,2,1);
polar(t,r1,'r');
title('r=sin(3t)');
subplot(1,2,2);
polar(t,r2,'g');
title('r=cos(3t)');
```

$$
绘制曲面z=e^{-x^2-y^2}的mesh图和surf图，给出图形标注
$$

```matlab
x=-2:0.1:2;
y=-2:0.1:2;
[x,y]=meshgrid(x,y);
z=exp(-x.^2-y.^2);
mesh(x,y,z);
title('Mesh Figure');
figure
surf(x,y,z);
title('surf Figure')
```

$$
绘制曲面z=xe^{-x^2-y^2}在[-2,2]*[-2,2]上的曲线图(mesh)和表面图(surf)以及给出图形标注的程序
$$

```matlab
x=-2:0.1:2;
y=-2:0.1:2;
[x,y]=meshgrid(x,y);
z=exp(-x.^2-y.^2);
mesh(x,y,z);
title('Mesh Figure');
figure
surf(x,y,z);
title('surf Figure')
```

$$
由solve求\frac{x^2}{4}+\frac{y^2}{2}-\frac{z^2}{2}=1所确定的y和z的表达式,给出程序
$$

```matlab
syms x y z
y=solve(x^2/4+y^2/2-z^2/2==1,y)
syms y;
z=solve(x^2/4+y^2/2-z^2/2==1,z)
```

![7](D:\文件\数学实验\7.png)

```
for i=1:50
    for j=1:50
        if i==j
            A(i,j)=3;
        elseif i==j+1||i==j-1
            A(i,j)=1;
        else
            A(i,j)=0;
        end
    end
end
A
for i=1:50
    if i==1||i==50
        v(i)=4;
    else
        v(i)=2;
    end
end
v
```

$$
令x=1:5,y=1:0.2:1.8,[X,Y]=meshgrid(x,y)则X=\quad Y=
$$

![8](D:\文件\数学实验\8.png)
$$
利用dsolve求解微分方程:y''-3y'-4y=0
$$

```matlab
syms y(t)
y=dsolve(diff(y,2)-3*diff(y)-4*y==0)
```

![9](D:\文件\数学实验\9.png)

```matlab
syms x y
z1=x^3*y-y^3*x;
z2=sqrt(log(x*y));
f=log(x^2+1)+cos(x);
z1x=diff(z1,x)
z1y=diff(z1,y)
z1xx=diff(z1,x,2)
z1xy=diff(z1,x,y)
z1yy=diff(z1,y,2)
z2x=diff(z2,x)
z2y=diff(z2,y)
z2xx=diff(z2,x,2)
z2xy=diff(z2,x,y)
z2yy=diff(z2,y,2)
fx=diff(f,x)
fxx=diff(f,x,2)
```

$$
求方程x^2+y^2-1=0所确定函数的导数,\frac{dy}{dx}
$$

```matlab
syms x y
g=x^2+y^2-1;
gx=diff(g,x);
gy=diff(g,y);
dydx=-gx/gy
```

![10](D:\文件\数学实验\10.png)

```matlab
n=input('输入n的值：\n')
s1=zeros(1,n);
s2=zeros(1,n);
for k=1:n
    x(k)=1/k/(k+1);
    y(k)=1/k;
    for i=1:k
        s1(k)=s1(k)+x(i);
        s2(k)=s2(k)+y(i);
    end
end
t=[s1;s2]
disp('级数1和级数2的部分和数列为')
disp(['s1 ',' s2'])
fprintf('%6.4f%6.4f\n',t)
sn1=s1(end);
sn2=s2(end);
disp(['级数1前n项和为',num2str(sn1)])
disp(['级数2前n项和为',num2str(sn2)])
```

![11](D:\文件\数学实验\11.png)

```matlab
clc
clear all
x=linspace(-2,2,80);
l1=(x.^2-x)/2;
l2=1-x.^2;
l3=(x.^2+x)/2;
plot(x,l1,'rp',x,l2,'g*',x,l3,'m+');
grid on
legend('l1','l2','l3')
```

![13](D:\文件\数学实验\13.png)

```matlab
syms y(t) u(x)
dsolve(diff(y,2)+5*diff(y)+4*y==0)
u1=diff(u);
u2=diff(u,2);
dsolve(u2-2*u1+u==-2*cos(x),u(0)==0,u1(0)==1)
```

![14](D:\文件\数学实验\14.png)

```matlab
a=0;
b=1;
n=1000;
h=(b-a)/n;
x=a:h:b;
y=x.^2+exp(-x)+log(x+1);
I1=trapz(x,y)
g=@(x) x.^2+exp(-x)+log(x+1);
I2=quad(g,a,b)

a=0;
b=pi;
n=1000;
h=(b-a)/n;
x=a:h:b;
y=sin(x).^2;
I1=trapz(x,y)
g=@(x) sin(x).^2;
I2=quad(g,a,b)
```

![16](D:\文件\数学实验\16.png)

```matlab
tspan=[0,2];
y0=0;
f=@(t,y)2*t;
[t,y]=ode45(f,tspan,y0);
plot(t,y);

syms y(t)
dsolve(diff(y)==2*t,y(0)==0)
```

![17](D:\文件\数学实验\17.png)

```matlab
syms x;
f=2*sqrt(1-x^2/9);
V=int(pi*f^2,x,-3,3)
```

![18](D:\文件\数学实验\18.png)

<img src="D:\文件\数学实验\12.png" alt="12"  />

```matlab
syms x;
f=x^3-6*x^2+9*x-2;
f1=diff(f);
f2=diff(f,x,2);
zp=solve(f1)
zpmin=min(zp);
zpmax=max(zp);
y1=subs(f1,x,zpmin-1);
y2=subs(f1,x,(zpmin+zpmax)/2);
y3=subs(f1,x,zpmax+1);
if double(y1)>0
    disp(['[',num2str(-inf),',',num2str(eval(zpmin)),']','is an increase interval']);
else
    disp(['[',num2str(-inf),',',num2str(eval(zpmin)),']','is an decrease interval']);
end 
if double(y2)>0
    disp(['[',num2str(eval(zpmin)),',',num2str(eval(zpmax)),']','is an increase interval']);
else
    disp(['[',num2str(eval(zpmin)),',',num2str(eval(zpmax)),']','is an decrease interval']);
end 
if double(y3)>0
    disp(['[',num2str(eval(zpmax)),',',num2str(inf),']','is an increase interval']);
else
    disp(['[',num2str(eval(zpmax)),',',num2str(inf),']','is an decrease interval']);
end 

gp=solve(f2)
z1=subs(f2,x,gp-1);
z2=subs(f2,x,gp+1);
if double(z1)>0
    disp(['[',num2str(-inf),',',num2str(eval(gp)),']','is an convex interval']);
else
    disp(['[',num2str(-inf),',',num2str(eval(gp)),']','is an concave interval']);
end
if double(z2)>0
    disp(['[',num2str(eval(gp)),',',num2str(inf),']','is an convex interval']);
else
    disp(['[',num2str(eval(gp)),',',num2str(inf),']','is an concave interval']);
end
xmax=[];xmin=[];
fmax=[];fmin=[];
for k=1:length(zp)
    A=subs(f2,x,zp(k));
    if double(A)>0
        xmin=[xmin;zp(k)];
        fmin=[fmin,subs(f,x,zp(k))];
    elseif double(A)<0
        xmax=[xmax,zp(k)];
        fmax=[fmax,subs(f,x,zp(k))];
    end
end
disp('xmin and fmin is:')
[xmin fmin]
disp('xmax and fmax is:')
[xmax fmax]
```

### 微分方程

$$
输入信号u(t)=e^{-5t}cos(2t+1)+5求下列微分方程的通解\\
y^{(4)}+10y^{(3)}+35y^{(2)}+50y^{(1)}+24y(t)=5u^{2}+4u^{(1)}+2u(t)
$$

```matlab
syms y(t) u(t)
u=exp(-5*t)*cos(2*t+1)+5;
dsolve(diff(y,4)+10*diff(y,3)+35*diff(y,2)+50*diff(y,1)+24*y==5*diff(u,t,2)+4*diff(u,t)+2*u)
```

$$
输入信号u(t)=e^{-5t}cos(2t+1)+5求下列微分方程的通解\\
y^{(4)}+10y^{(3)}+35y^{(2)}+50y^{(1)}+24y(t)=5u^{2}+4u^{(1)}+2u(t)\\
y(0)=3\quad y^{1}(0)=2\quad y^{2}(0)=0\quad y^{3}(0)=0
$$

```matlab
syms y(t) u(t)
u=exp(-5*t)*cos(2*t+1)+5;
Dy=diff(y,1);
D2y=diff(y,2);
D3y=diff(y,3);
D4y=diff(y,4);
dsolve(diff(y,4)+10*diff(y,3)+35*diff(y,2)+50*diff(y,1)+24*y==5*diff(u,t,2)+4*diff(u,t)+2*u,y(0)==3,Dy(0)==2,D2y(0)==0,D3y(0)==0)
```

$$
求方程组
\left\{\begin{matrix}
x^{(2)}+2x'=x+2y-e^{-t}\\ 
y'=4x+3y+4e^{-t}
\end{matrix}\right.的通解
$$

```matlab
syms y(t) x(t)
[x,y]=dsolve(diff(x,2)+2*diff(x,1)==x+2*y-exp(-4*t),diff(y,1)==4*x+3*y+4*exp(-t))
```

$$
求解方程x'(t)=x(1-x^2)的通解
$$

```matlab
syms x(t)
dsolve(diff(x,1)==x(t)*(1-x(t)*x(t)))
```

$$
求解Lorenz方程组
\left\{\begin{matrix}
x_{1}'(t)=-\beta x_{1}(t)+x_{2}(t)x_{3}(t)\\ 
x_{2}'(t)=-\rho x_{2}(t)+\rho x_{3}(t)\\
x_{3}'(t)=-x_{1}(t)x_{2}(t)+\sigma x_{2}(t)-x_{3}(t)
\end{matrix}\right.\\
其中参数\beta =\frac{8}{3},\rho =10,\sigma =28,初始条件x_1(0)=x_2(0)=0,x_3(3)=10^{-10}
$$

```matlab
t_final=100;
x0=[0;0;1e-10];
[t,x]=ode45(@lorenzeq1,[0,t_final],x0);
plot(t,x(:,1),'-',t,x(:,2),'--',t,x(:,3),'-.');
legend('x1','x2','x3')
figure
subplot(3,1,1);
plot(t,x(:,1));
ylabel('x1')
subplot(3,1,2);
plot(t,x(:,2));
ylabel('x2')
subplot(3,1,3);
plot(t,x(:,3));
ylabel('x3')
figure
plot3(x(:,1),x(:,2),x(:,3));
```

